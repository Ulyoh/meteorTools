{"version":3,"sources":["/tools/isobuild/minifier-plugin.js"],"names":[],"mappings":";;mCAAyB,0BAA0B;;;;AACnD,IAAM,iBAAiB,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC;;IAEjD,SAAS;wBAAT,SAAS;;AACF,WADP,SAAS,CACD,MAAM,EAAgB;QAAd,OAAO,yDAAG,EAAE;sCAD5B,SAAS;;AAEX,2CAAO,CAAC;;AAER,QAAI,CAAC,OAAO,GAAG,MAAM,CAAC;AACtB,QAAI,CAAC,KAAK,GAAG,OAAO,CAAC,IAAI,CAAC;AAC1B,QAAI,CAAC,cAAc,GAAG,EAAE,CAAC;GAC1B;;AAPG,WAAS,WASb,mBAAmB,GAAA,+BAAG;AACpB,WAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;GAChC;;AAXG,WAAS,WAYb,gBAAgB,GAAA,4BAAG;AACjB,UAAM,IAAI,KAAK,CAAC,4CAA4C,CAAC,CAAC;GAC/D;;AAdG,WAAS,WAeb,cAAc,GAAA,0BAAG;AACf,UAAM,IAAI,KAAK,CAAC,4CAA4C,CAAC,CAAC;GAC/D;;AAjBG,WAAS,WAkBb,aAAa,GAAA,yBAAG;AACd,WAAO,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;GAC5B;;AApBG,WAAS,WAqBb,OAAO,GAAA,mBAAG;AACR,WAAO,IAAI,CAAC,KAAK,CAAC;GACnB;;AAvBG,WAAS,WAyBb,KAAK,GAAA,eAAC,IAAyC,EAAE;QAA1C,OAAO,GAAR,IAAyC,CAAxC,OAAO;QAAE,UAAU,GAApB,IAAyC,CAA/B,UAAU;QAAE,IAAI,GAA1B,IAAyC,CAAnB,IAAI;QAAE,MAAM,GAAlC,IAAyC,CAAb,MAAM;QAAE,IAAI,GAAxC,IAAyC,CAAL,IAAI;;AAC5C,QAAM,OAAO,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;AACvC,qCAAa,KAAK,CAAC,OAAO,IAAK,kBAAkB,GAAG,OAAO,AAAC,EAAE;AAC5D,UAAI,EAAE,UAAU,IAAI,OAAO;AAC3B,UAAI,EAAE,IAAI,GAAG,IAAI,GAAG,SAAS;AAC7B,YAAM,EAAE,MAAM,GAAG,MAAM,GAAG,SAAS;AACnC,UAAI,EAAE,IAAI,GAAG,IAAI,GAAG,SAAS;KAC9B,CAAC,CAAC;GACJ;;;;;;;;AAjCG,WAAS,WAwCb,eAAe,GAAA,2BAAG;AAChB,WAAO,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC;GAChC;;;;;;;;AA1CG,WAAS,WAiDb,YAAY,GAAA,wBAAG;AACb,WAAO,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC;GAC/B;;SAnDG,SAAS;GAAS,iBAAiB,CAAC,SAAS;;IAsDtC,MAAM;wBAAN,MAAM;;WAAN,MAAM;sCAAN,MAAM;;;;;;;;;;AAAN,QAAM,WAKjB,aAAa,GAAA,uBAAC,OAAO,EAAE;AACrB,QAAM,IAAI,GAAG,IAAI,CAAC;AAClB,QAAI,CAAC,cAAc,CAAC,IAAI,CAAC;AACvB,UAAI,EAAE,OAAO,CAAC,IAAI;AAClB,eAAS,EAAE,OAAO,CAAC,SAAS;AAC5B,UAAI,EAAE,OAAO,CAAC,IAAI;KACnB,CAAC,CAAC;GACJ;;SAZU,MAAM;GAAS,SAAS;;;;IAexB,OAAO;wBAAP,OAAO;;WAAP,OAAO;sCAAP,OAAO;;;;;;;;;;AAAP,SAAO,WAKlB,aAAa,GAAA,uBAAC,OAAO,EAAE;AACrB,QAAI,CAAC,cAAc,CAAC,IAAI,CAAC;AACvB,UAAI,EAAE,OAAO,CAAC,IAAI;AAClB,eAAS,EAAE,OAAO,CAAC,SAAS;AAC5B,UAAI,EAAE,OAAO,CAAC,IAAI;KACnB,CAAC,CAAC;GACJ;;SAXU,OAAO;GAAS,SAAS","file":"tools/isobuild/minifier-plugin.js.map","sourcesContent":["import buildmessage from '../utils/buildmessage.js';\nconst buildPluginModule = require('./build-plugin.js');\n\nclass InputFile extends buildPluginModule.InputFile {\n  constructor(source, options = {}) {\n    super();\n\n    this._source = source;\n    this._arch = options.arch;\n    this._minifiedFiles = [];\n  }\n\n  getContentsAsBuffer() {\n    return this._source.contents();\n  }\n  getPathInPackage() {\n    throw new Error(\"Compiled files don't belong to any package\");\n  }\n  getPackageName() {\n    throw new Error(\"Compiled files don't belong to any package\");\n  }\n  getSourceHash() {\n    return this._source.hash();\n  }\n  getArch() {\n    return this._arch;\n  }\n\n  error({message, sourcePath, line, column, func}) {\n    const relPath = this.getPathInBundle();\n    buildmessage.error(message || ('error minifying ' + relPath), {\n      file: sourcePath || relPath,\n      line: line ? line : undefined,\n      column: column ? column : undefined,\n      func: func ? func : undefined\n    });\n  }\n\n  /**\n   * @summary Returns the path of the compiled file in the bundle.\n   * @memberof InputFile\n   * @returns {String}\n   */\n  getPathInBundle() {\n    return this._source.targetPath;\n  }\n\n  /**\n   * @summary Returns the source-map associated with the file.\n   * @memberof InputFile\n   * @returns {String}\n   */\n  getSourceMap() {\n    return this._source.sourceMap;\n  }\n}\n\nexport class JsFile extends InputFile {\n  // - data\n  // - sourceMap\n  // - path\n  // - hash?\n  addJavaScript(options) {\n    const self = this;\n    self._minifiedFiles.push({\n      data: options.data,\n      sourceMap: options.sourceMap,\n      path: options.path\n    });\n  }\n}\n\nexport class CssFile extends InputFile {\n  // - data\n  // - sourceMap\n  // - path\n  // - hash?\n  addStylesheet(options) {\n    this._minifiedFiles.push({\n      data: options.data,\n      sourceMap: options.sourceMap,\n      path: options.path\n    });\n  }\n}\n\n"]}